{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/alok/Projects/audio-guide/Backend/audioguide-app/src/app/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Agent } from '@fileverse/agents'\n\ninterface Guide {\n  title: string;\n  content: string;\n  createdAt: string;\n  fileId?: string; // IPFS file ID\n}\n\nexport default function DashboardPage() {\n  const router = useRouter()\n  const [walletAddress, setWalletAddress] = useState<string | null>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const [title, setTitle] = useState('')\n  const [content, setContent] = useState('')\n  const [guides, setGuides] = useState<Guide[]>([])\n  const [agent, setAgent] = useState<any>(null)\n\n  useEffect(() => {\n    const initializeAgent = async () => {\n      try {\n        const newAgent = new Agent({\n          chain: process.env.NEXT_PUBLIC_CHAIN || 'gnosis',\n          privateKey: process.env.NEXT_PUBLIC_PRIVATE_KEY,\n          pinataJWT: process.env.NEXT_PUBLIC_PINATA_JWT,\n          pinataGateway: process.env.NEXT_PUBLIC_PINATA_GATEWAY,\n          pimlicoAPIKey: process.env.NEXT_PUBLIC_PIMLICO_API_KEY,\n        })\n        await newAgent.setupStorage('audio-guides')\n        setAgent(newAgent)\n      } catch (error) {\n        console.error('Failed to initialize Fileverse agent:', error)\n      }\n    }\n\n    initializeAgent()\n  }, [])\n\n  useEffect(() => {\n    // Check if user is connected\n    const address = localStorage.getItem('walletAddress')\n    if (!address) {\n      router.push('/')\n      return\n    }\n    setWalletAddress(address)\n    setIsLoading(false)\n  }, [router])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900\">\n        <div className=\"text-gray-600 dark:text-gray-400\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!walletAddress) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900\">\n        <div className=\"text-gray-600 dark:text-gray-400\">\n          No wallet connected. Redirecting...\n        </div>\n      </div>\n    )\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!title.trim() || !content.trim()) return\n\n    try {\n      setIsSubmitting(true)\n\n      // Create markdown content\n      const markdownContent = `# ${title}\\n\\n${content}`\n      \n      // Upload to IPFS using Fileverse\n      const file = await agent.create(markdownContent)\n      console.log('File uploaded to IPFS:', file)\n\n      const newGuide = {\n        title,\n        content,\n        createdAt: new Date().toISOString(),\n        fileId: file.fileId\n      }\n      setGuides(prev => [newGuide, ...prev])\n      setTitle('')\n      setContent('')\n      alert('Guide preview created and stored on IPFS successfully!')\n    } catch (error) {\n      console.error('Failed to create guide:', error)\n      alert('Failed to create guide preview')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dashboard</h1>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center\">\n                <div className=\"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white text-sm mr-2\">\n                  {walletAddress?.slice(2, 4)}\n                </div>\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  {walletAddress?.slice(0, 6)}...{walletAddress?.slice(-4)}\n                </span>\n              </div>\n              <button\n                onClick={() => {\n                  localStorage.removeItem('walletAddress')\n                  router.push('/')\n                }}\n                className=\"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white\"\n              >\n                Disconnect\n              </button>\n            </div>\n          </div>\n\n          <div className=\"space-y-8\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                Preview Guide Content\n              </h2>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Title\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Content\n                  </label>\n                  <textarea\n                    value={content}\n                    onChange={(e) => setContent(e.target.value)}\n                    rows={6}\n                    placeholder=\"Write your guide content here. This will be converted to an audio guide later.\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600\"\n                    required\n                  />\n                </div>\n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  className=\"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50\"\n                >\n                  {isSubmitting ? 'Creating Preview...' : 'Create Preview'}\n                </button>\n              </form>\n            </div>\n\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n                Your Guide Previews\n              </h2>\n              {guides.length === 0 ? (\n                <div className=\"text-gray-600 dark:text-gray-400 text-center py-8\">\n                  No guide previews created yet\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {guides.map((guide, index) => (\n                    <div\n                      key={index}\n                      className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow\"\n                    >\n                      <h3 className=\"font-semibold text-gray-900 dark:text-white mb-2\">\n                        {guide.title}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-3\">\n                        {guide.content}\n                      </p>\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 flex justify-between items-center\">\n                        <span>Created: {new Date(guide.createdAt).toLocaleDateString()}</span>\n                        {guide.fileId && (\n                          <span className=\"text-indigo-600 dark:text-indigo-400\">\n                            IPFS: {guide.fileId.slice(0, 6)}...{guide.fileId.slice(-4)}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n} "],"names":[],"mappings":"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"}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}